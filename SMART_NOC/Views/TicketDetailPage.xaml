<Page
    x:Class="SMART_NOC.Views.TicketDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:models="using:SMART_NOC.Models"
    mc:Ignorable="d">

    <Page.Resources>
        <ThemeShadow x:Name="SharedShadow" />

        <Style x:Key="GlassCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#E8F3F9"/>
            <Setter Property="BorderBrush" Value="#60B4FF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Shadow" Value="{StaticResource SharedShadow}"/>
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#E2E8F0"/>
            <Setter Property="CharacterSpacing" Value="50"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="FontFamily" Value="{StaticResource InterBold}"/>
        </Style>

        <Style x:Key="BadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Background" Value="#F0F0F0"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Bar (ENHANCED) -->
        <Border Grid.Row="0" Background="{StaticResource LayerFillColorDefaultBrush}" BorderBrush="#E5E5E5" BorderThickness="0,0,0,1" Padding="32,16,32,16"
                AutomationProperties.Name="Page header"
                AutomationProperties.HelpText="Header section with navigation and action buttons">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="BtnBack" Click="BtnBack_Click" Style="{StaticResource NavigationBackButtonNormalStyle}" Height="44" Width="44" ToolTipService.ToolTip="Go Back"
                        AutomationProperties.Name="Back button"
                        AutomationProperties.HelpText="Navigate back to the previous page"/>

                <!-- Breadcrumb & Quick Info (NEW) -->
                <StackPanel Grid.Column="1" Margin="16,0,0,0" VerticalAlignment="Center" Spacing="12"
                            AutomationProperties.Name="Page breadcrumb"
                            AutomationProperties.HelpText="Shows current page location and ticket information">
                    <TextBlock Text="Ticket Details" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"
                               AutomationProperties.Name="Page title: Ticket Details"/>
                    <TextBlock Text="{x:Bind Ticket.TT_IOH}" FontSize="20" FontWeight="Bold" Foreground="White" FontFamily="{StaticResource InterBold}"
                               AutomationProperties.Name="Current ticket ID"
                               AutomationProperties.HelpText="Ticket identification number for the currently displayed incident"/>
                </StackPanel>

                <!-- Action Buttons (ENHANCED) -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="12"
                            AutomationProperties.Name="Action buttons"
                            AutomationProperties.HelpText="Buttons for common ticket operations">
                    <Button x:Name="BtnRefresh" Click="BtnRefresh_Click" Style="{StaticResource SubtletyButtonStyle}" ToolTipService.ToolTip="Refresh Data" Padding="10,8"
                            AutomationProperties.Name="Refresh button"
                            AutomationProperties.HelpText="Reload current ticket data from the database">
                        <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                    </Button>

                    <Button x:Name="BtnCopy" Click="BtnCopy_Click" Style="{StaticResource SubtletyButtonStyle}" ToolTipService.ToolTip="Copy Summary" Padding="10,8"
                            AutomationProperties.Name="Copy summary button"
                            AutomationProperties.HelpText="Copy ticket information to clipboard">
                        <FontIcon Glyph="&#xE8C8;" FontSize="14"/>
                    </Button>

                    <Button x:Name="BtnLoadToForm" Click="BtnLoadToForm_Click" Style="{StaticResource SubtletyButtonStyle}" ToolTipService.ToolTip="Edit Ticket" Padding="10,8"
                            AutomationProperties.Name="Edit button"
                            AutomationProperties.HelpText="Load ticket data into form editor for modifications">
                        <FontIcon Glyph="&#xE70F;" FontSize="14"/>
                    </Button>

                    <Button x:Name="BtnShare" Click="BtnShare_Click" Style="{StaticResource SubtletyButtonStyle}" ToolTipService.ToolTip="Share" Padding="10,8"
                            AutomationProperties.Name="Share button"
                            AutomationProperties.HelpText="Share ticket information with other team members">
                        <FontIcon Glyph="&#xE72D;" FontSize="14"/>
                    </Button>

                    <Button x:Name="BtnPdf" Click="BtnPdf_Click" Style="{StaticResource AccentButtonStyle}" Background="{StaticResource InfoColor}" BorderThickness="0" Foreground="White" Padding="16,8" CornerRadius="8"
                            AutomationProperties.Name="Generate BAPS button"
                            AutomationProperties.HelpText="Generate official BAPS document as PDF report for this ticket">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE7ad;" FontSize="14"/>
                            <TextBlock Text="GENERATE BAPS" FontWeight="SemiBold" FontSize="12"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content Section -->
        <ScrollViewer Grid.Row="1" Padding="32,28,32,32"
                      AutomationProperties.Name="Ticket details content"
                      AutomationProperties.HelpText="Scrollable area containing detailed ticket information, timeline, and impact analysis">
            <StackPanel Spacing="28">

                <!-- Status & Quick Info Banner (ENHANCED) -->
                <Grid ColumnSpacing="16"
                      AutomationProperties.Name="Status information cards"
                      AutomationProperties.HelpText="Quick overview cards showing status, duration, and region information">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Status Card -->
                    <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                            AutomationProperties.Name="Status card"
                            AutomationProperties.HelpText="Shows current incident status with color coding">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon Glyph="&#xE73E;" Foreground="{StaticResource InfoColor}" FontSize="16"/>
                                <TextBlock Text="STATUS" Style="{StaticResource SectionHeaderStyle}" Margin="0" Foreground="{StaticResource TextPrimaryBrush}"/>
                            </StackPanel>
                            <Border Background="{x:Bind StatusBackground}" CornerRadius="8" Padding="12,8">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon Glyph="{x:Bind StatusIcon}" FontSize="14" Foreground="White"/>
                                    <TextBlock Text="{x:Bind Ticket.Status}" FontWeight="Bold" Foreground="White" FontSize="14"
                                               AutomationProperties.Name="Status value"
                                               AutomationProperties.HelpText="Current status of the incident ticket"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Duration Card -->
                    <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                            AutomationProperties.Name="MTTR card"
                            AutomationProperties.HelpText="Shows mean time to repair and incident duration">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon Glyph="&#xE916;" Foreground="{StaticResource InfoColor}" FontSize="16"/>
                                <TextBlock Text="MTTR / DURATION" Style="{StaticResource SectionHeaderStyle}" Margin="0" Foreground="{StaticResource TextPrimaryBrush}"/>
                            </StackPanel>
                            <TextBlock Text="{x:Bind GetMttrDuration()}" FontSize="22" FontWeight="Bold" Foreground="{StaticResource InfoColor}" FontFamily="{StaticResource InterBold}"
                                       AutomationProperties.Name="Duration value"
                                       AutomationProperties.HelpText="Time elapsed from incident start to resolution"/>
                        </StackPanel>
                    </Border>

                    <!-- Region Card (NEW) -->
                    <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                            AutomationProperties.Name="Region card"
                            AutomationProperties.HelpText="Geographic region where this incident occurred">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon Glyph="&#xE81D;" Foreground="{StaticResource InfoColor}" FontSize="16"/>
                                <TextBlock Text="REGION" Style="{StaticResource SectionHeaderStyle}" Margin="0" Foreground="{StaticResource TextPrimaryBrush}"/>
                            </StackPanel>
                            <TextBlock Text="{x:Bind Ticket.Region}" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"
                                       AutomationProperties.Name="Region value"
                                       AutomationProperties.HelpText="Geographic region name"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Incident Summary -->
                <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                        AutomationProperties.Name="Incident summary section"
                        AutomationProperties.HelpText="Detailed summary of the incident including ticket IDs, segment, and location">
                    <StackPanel Spacing="16">
                        <TextBlock Text="INCIDENT SUMMARY" Style="{StaticResource SectionHeaderStyle}"
                                   AutomationProperties.Name="Incident summary heading"/>
                        
                        <StackPanel Spacing="20">
                            <Grid ColumnSpacing="24" RowSpacing="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- LEFT COLUMN -->
                                <StackPanel Spacing="18"
                                            AutomationProperties.Name="Ticket identification section"
                                            AutomationProperties.HelpText="Contains ticket IDs and target information">
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="TICKET ID" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Ticket ID label"/>
                                        <TextBlock Text="{x:Bind Ticket.TT_IOH}" FontSize="13" Foreground="White" FontWeight="SemiBold" TextWrapping="Wrap"
                                                   AutomationProperties.Name="Ticket ID value"
                                                   AutomationProperties.HelpText="Internal tracking number for this incident"/>
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock Text="SEGMENT PM" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Segment label"/>
                                        <TextBlock Text="{x:Bind Ticket.SegmentPM}" FontSize="13" Foreground="White" FontWeight="SemiBold" TextWrapping="Wrap"
                                                   AutomationProperties.Name="Segment value"
                                                   AutomationProperties.HelpText="Network segment or portfolio manager responsible for this service"/>
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock Text="CUT POINT LOCATION" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Cut point label"/>
                                        <TextBlock Text="{x:Bind Ticket.CutPoint}" FontSize="12" Foreground="#E2E8F0" TextWrapping="Wrap" LineHeight="18"
                                                   AutomationProperties.Name="Cut point location"
                                                   AutomationProperties.HelpText="Physical or logical location where the incident occurred with coordinates or distance information"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- RIGHT COLUMN -->
                                <StackPanel Grid.Column="1" Spacing="18"
                                            AutomationProperties.Name="Additional ticket information section"
                                            AutomationProperties.HelpText="Contains reference numbers, field team info, and header details">
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="MANDAU REFERENCE" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Mandau reference label"/>
                                        <TextBlock Text="{x:Bind Ticket.TT_Mandau}" FontSize="12" Foreground="#E2E8F0" TextWrapping="Wrap" LineHeight="18"
                                                   AutomationProperties.Name="Mandau reference value"
                                                   AutomationProperties.HelpText="External reference number from Mandau system"/>
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock Text="PIC / FIELD TEAM" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Field team label"/>
                                        <TextBlock Text="{x:Bind Ticket.PicInfo}" FontSize="12" Foreground="#E2E8F0" TextWrapping="Wrap" LineHeight="18"
                                                   AutomationProperties.Name="Field team value"
                                                   AutomationProperties.HelpText="Person in charge or field team member assigned to this ticket"/>
                                    </StackPanel>

                                    <StackPanel Spacing="6">
                                        <TextBlock Text="HEADER" FontSize="10" Foreground="#CBD5E1" FontWeight="Bold"
                                                   AutomationProperties.Name="Header label"/>
                                        <TextBlock Text="{x:Bind Ticket.Header}" FontSize="12" Foreground="#E2E8F0" TextWrapping="Wrap" LineHeight="18"
                                                   AutomationProperties.Name="Header value"
                                                   AutomationProperties.HelpText="Subject or header describing the incident type and scope"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Root Cause Analysis (ENHANCED) -->
                <Border Background="#FFE8E6" BorderBrush="#FF3B30" BorderThickness="1" CornerRadius="12" Padding="20" Translation="0,0,20"
                        AutomationProperties.Name="Root cause analysis section"
                        AutomationProperties.HelpText="Critical section analyzing the root cause of the incident">
                    <StackPanel Spacing="14">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <FontIcon Glyph="&#xE7BA;" Foreground="#FF3B30" FontSize="16" FontWeight="Bold"/>
                            <TextBlock Text="ROOT CAUSE ANALYSIS" FontSize="12" FontWeight="Bold" Foreground="#B91C1C" CharacterSpacing="50" FontFamily="{StaticResource InterBold}"
                                       AutomationProperties.Name="Root cause analysis heading"/>
                        </StackPanel>
                        <TextBlock Text="{x:Bind Ticket.RootCause}" FontSize="14" Foreground="#5F2120" TextWrapping="Wrap" LineHeight="24" FontFamily="{StaticResource InterRegular}"
                                   AutomationProperties.Name="Root cause description"
                                   AutomationProperties.HelpText="Detailed explanation of the underlying cause of this incident"/>
                    </StackPanel>
                </Border>

                <!-- Timeline & Updates Section -->
                <Grid ColumnSpacing="24"
                      AutomationProperties.Name="Timeline and updates section"
                      AutomationProperties.HelpText="Chronological record of incident events and progress updates">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Chronological Updates -->
                    <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                            AutomationProperties.Name="Chronological updates section"
                            AutomationProperties.HelpText="Timeline of all updates and actions taken during incident">
                        <StackPanel Spacing="16">
                            <TextBlock Text="CHRONOLOGICAL UPDATES / PROGRESS" Style="{StaticResource SectionHeaderStyle}"
                                       AutomationProperties.Name="Updates heading"/>

                            <ScrollViewer MaxHeight="380" VerticalScrollBarVisibility="Auto">
                                <TextBox Text="{x:Bind Ticket.Updates}" IsReadOnly="True" 
                                         Background="Transparent" BorderThickness="0" 
                                         FontFamily="Consolas" FontSize="11" Foreground="#E2E8F0"
                                         Padding="0"
                                         AcceptsReturn="True" 
                                         TextWrapping="Wrap"
                                         AutomationProperties.Name="Updates log"
                                         AutomationProperties.HelpText="Chronological log of all incident updates and actions taken by team members"/>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <!-- Incident Timeline (RIGHT SIDEBAR) -->
                    <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                            AutomationProperties.Name="Incident timeline section"
                            AutomationProperties.HelpText="Visual timeline of key incident milestones">
                        <StackPanel Spacing="16">
                            <TextBlock Text="INCIDENT TIMELINE" Style="{StaticResource SectionHeaderStyle}"
                                       AutomationProperties.Name="Timeline heading"/>

                            <!-- Occur Time -->
                            <StackPanel Spacing="8"
                                        AutomationProperties.Name="Occur time milestone"
                                        AutomationProperties.HelpText="When the incident first occurred">
                                <Grid ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="24"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Spacing="4">
                                        <Border Width="12" Height="12" CornerRadius="6" Background="#FF3B30" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <Border Width="2" Background="#E5E7EB" HorizontalAlignment="Center" MinHeight="28"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Spacing="2">
                                        <TextBlock Text="Network Down (Occur)" FontSize="10" Foreground="#CBD5E1" FontWeight="SemiBold"
                                                   AutomationProperties.Name="Occur time label"/>
                                        <TextBlock Text="{x:Bind Ticket.OccurTime}" FontSize="12" Foreground="White" FontWeight="SemiBold" FontFamily="Consolas"
                                                   AutomationProperties.Name="Occur time value"
                                                   AutomationProperties.HelpText="Date and time when the network incident started"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>

                            <!-- Dispatch Time -->
                            <StackPanel Spacing="8"
                                        AutomationProperties.Name="Dispatch time milestone"
                                        AutomationProperties.HelpText="When the field team was dispatched">
                                <Grid ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="24"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Spacing="4">
                                        <Border Width="12" Height="12" CornerRadius="6" Background="#00B4FF" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <Border Width="2" Background="#E5E7EB" HorizontalAlignment="Center" MinHeight="28"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Spacing="2">
                                        <TextBlock Text="Team Dispatch" FontSize="10" Foreground="#CBD5E1" FontWeight="SemiBold"
                                                   AutomationProperties.Name="Dispatch time label"/>
                                        <TextBlock Text="{x:Bind Ticket.DispatchTime}" FontSize="12" Foreground="White" FontWeight="SemiBold" FontFamily="Consolas"
                                                   AutomationProperties.Name="Dispatch time value"
                                                   AutomationProperties.HelpText="Date and time when the repair team was dispatched to the location"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>

                            <!-- Closed Time -->
                            <StackPanel Spacing="8"
                                        AutomationProperties.Name="Closure time milestone"
                                        AutomationProperties.HelpText="When the incident was resolved and closed">
                                <Grid ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="24"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Width="12" Height="12" CornerRadius="6" Background="{x:Bind ClosedDotColor}" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,2,0,0"/>

                                    <StackPanel Grid.Column="1" Spacing="2">
                                        <TextBlock Text="Ticket Closed / Resolved" FontSize="10" Foreground="#CBD5E1" FontWeight="SemiBold"
                                                   AutomationProperties.Name="Closure time label"/>
                                        <TextBlock Text="{x:Bind Ticket.ClosedTime}" FontSize="12" Foreground="White" FontWeight="SemiBold" FontFamily="Consolas"
                                                   AutomationProperties.Name="Closure time value"
                                                   AutomationProperties.HelpText="Date and time when the incident was resolved and ticket closed"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Evidence Section (ENHANCED) -->
                <StackPanel x:Name="EvidenceSection" Visibility="Collapsed" Spacing="12"
                            AutomationProperties.Name="Evidence section"
                            AutomationProperties.HelpText="Contains field evidence and photographic documentation">
                    <TextBlock Text="FIELD EVIDENCE / ATTACHMENT" Style="{StaticResource SectionHeaderStyle}" Margin="4,0,0,0"
                               AutomationProperties.Name="Evidence heading"/>
                    <Border CornerRadius="12" BorderBrush="#30B4FF" BorderThickness="1" Background="#F8FBFF" Padding="2" Translation="0,0,20"
                            AutomationProperties.Name="Evidence image"
                            AutomationProperties.HelpText="Photographic evidence from field team documenting the incident site conditions">
                        <Image x:Name="ImgEvidence" Stretch="Uniform" MaxHeight="480" HorizontalAlignment="Center"/>
                    </Border>
                </StackPanel>

                <!-- Impacted Services (ENHANCED) -->
                <Border Style="{StaticResource GlassCardStyle}" Translation="0,0,20"
                        AutomationProperties.Name="Impacted services section"
                        AutomationProperties.HelpText="List of customers and services affected by this incident">
                    <StackPanel Spacing="16">
                        <TextBlock Text="IMPACTED SERVICES / CUSTOMERS" Style="{StaticResource SectionHeaderStyle}"
                                   AutomationProperties.Name="Impacted services heading"/>

                        <ItemsControl ItemsSource="{x:Bind Ticket.ImpactDetail}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,0,0,10" ColumnSpacing="12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <FontIcon Glyph="&#xE7BA;" FontSize="12" Foreground="#FF3B30" VerticalAlignment="Center"
                                                  AutomationProperties.Name="Impact indicator"/>
                                        <TextBlock Grid.Column="1" Text="{Binding Name}" FontSize="13" Foreground="White" VerticalAlignment="Center"
                                                   AutomationProperties.Name="Service or customer name"
                                                   AutomationProperties.HelpText="Service or customer affected by the incident"/>
                                        <Border Grid.Column="2" Style="{StaticResource BadgeStyle}" Background="#FFE8E6"
                                                AutomationProperties.Name="Impact status"
                                                AutomationProperties.HelpText="Current status of the service impact">
                                            <TextBlock Text="{Binding Status}" FontSize="10" Foreground="#FF3B30" FontWeight="Bold" FontFamily="{StaticResource InterBold}"/>
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="No impact data recorded." 
                                   Visibility="{x:Bind GetEmptyStateVisibility(Ticket.ImpactDetail.Count), Mode=OneWay}"
                                   FontSize="12" Foreground="{StaticResource TextTertiaryBrush}" FontStyle="Italic"
                                   AutomationProperties.Name="No impact data message"
                                   AutomationProperties.HelpText="No customers or services were impacted by this incident"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>